<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess GPT - Ch∆°i C·ªù V·ªõi AI</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="chess-loader">‚ôî</div>
            <h2>ƒêang t·∫£i AI...</h2>
            <p class="loading-text">Chu·∫©n b·ªã 34 tri·ªáu v√°n c·ªù kinh nghi·ªám</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <h1><i data-lucide="crown" class="header-icon"></i> Chess GPT</h1>
            <p class="subtitle">Th√°ch th·ª©c AI ƒë∆∞·ª£c hu·∫•n luy·ªán t·ª´ 34 tri·ªáu v√°n c·ªù</p>
        </header>

        <!-- Game Setup -->
        <div id="setup-panel" class="setup-panel">
            <div class="setup-card">
                <h2><i data-lucide="gamepad-2" class="icon-inline"></i> Thi·∫øt l·∫≠p v√°n ƒë·∫•u</h2>

                <div class="option-group">
                    <label>Ch·ªçn b√™n:</label>
                    <div class="color-selector">
                        <button id="btn-white" class="color-btn active" data-color="white">
                            <span class="piece">‚ôî</span>
                            <span>Tr·∫Øng</span>
                        </button>
                        <button id="btn-black" class="color-btn" data-color="black">
                            <span class="piece">‚ôö</span>
                            <span>ƒêen</span>
                        </button>
                    </div>
                </div>

                <div class="option-group">
                    <label>ƒê·ªô kh√≥:</label>
                    <div class="difficulty-selector">
                        <button class="diff-btn" data-diff="easy">
                            <i data-lucide="smile" class="diff-icon"></i>
                            <span class="name">D·ªÖ</span>
                            <span class="desc">Nhi·ªÅu sai l·∫ßm</span>
                        </button>
                        <button class="diff-btn active" data-diff="normal">
                            <i data-lucide="brain" class="diff-icon"></i>
                            <span class="name">Th∆∞·ªùng</span>
                            <span class="desc">C√¢n b·∫±ng</span>
                        </button>
                        <button class="diff-btn" data-diff="hard">
                            <i data-lucide="flame" class="diff-icon"></i>
                            <span class="name">Kh√≥</span>
                            <span class="desc">T√≠nh to√°n k·ªπ</span>
                        </button>
                    </div>
                </div>

                <button id="btn-start" class="start-btn">
                    <i data-lucide="swords" class="btn-icon"></i> B·∫Øt ƒë·∫ßu v√°n ƒë·∫•u
                </button>
            </div>
        </div>

        <!-- Game Board -->
        <div id="game-panel" class="game-panel hidden">
            <div class="game-layout">
                <!-- Left: Info -->
                <div class="game-info">
                    <div class="player-card ai">
                        <div class="avatar"><i data-lucide="bot" class="avatar-icon"></i></div>
                        <div class="info">
                            <span class="name">Chess GPT</span>
                            <span id="ai-color" class="color">ƒêen</span>
                        </div>
                        <div id="ai-thinking" class="thinking hidden">
                            <span class="dot"></span>
                            <span class="dot"></span>
                            <span class="dot"></span>
                        </div>
                    </div>

                    <div class="vs-badge">VS</div>

                    <div class="player-card human">
                        <div class="avatar"><i data-lucide="user" class="avatar-icon"></i></div>
                        <div class="info">
                            <span class="name">B·∫°n</span>
                            <span id="human-color" class="color">Tr·∫Øng</span>
                        </div>
                    </div>

                    <div class="difficulty-badge">
                        <i data-lucide="gauge" class="badge-icon"></i>
                        <span id="current-diff">Th∆∞·ªùng</span>
                    </div>
                </div>

                <!-- Center: Board -->
                <div class="board-container">
                    <div id="chessboard" class="chessboard"></div>
                    <div id="turn-indicator" class="turn-indicator">L∆∞·ª£t c·ªßa b·∫°n</div>
                </div>

                <!-- Right: Move History -->
                <div class="history-panel">
                    <h3><i data-lucide="scroll-text" class="icon-inline"></i> L·ªãch s·ª≠ n∆∞·ªõc ƒëi</h3>
                    <div id="move-history" class="move-list"></div>
                    <div class="game-controls">
                        <button id="btn-undo" class="ctrl-btn" disabled>
                            <i data-lucide="undo-2"></i> ƒêi l·∫°i
                        </button>
                        <button id="btn-reset" class="ctrl-btn">
                            <i data-lucide="refresh-cw"></i> V√°n m·ªõi
                        </button>
                        <button id="btn-settings" class="ctrl-btn">
                            <i data-lucide="settings"></i> C√†i ƒë·∫∑t
                        </button>
                        <button id="btn-quit" class="ctrl-btn secondary">
                            <i data-lucide="log-out"></i> Tho√°t
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content settings-content">
                <h2><i data-lucide="settings" class="icon-inline"></i> C√†i ƒë·∫∑t</h2>

                <div class="setting-group">
                    <label><i data-lucide="moon" class="label-icon"></i> Giao di·ªán:</label>
                    <div class="theme-toggle">
                        <button class="theme-btn active" data-theme="dark">
                            <i data-lucide="moon"></i> T·ªëi
                        </button>
                        <button class="theme-btn" data-theme="light">
                            <i data-lucide="sun"></i> S√°ng
                        </button>
                    </div>
                </div>

                <div class="setting-group">
                    <label><i data-lucide="palette" class="label-icon"></i> M√†u b√†n c·ªù:</label>
                    <div class="board-themes">
                        <button class="board-theme-btn active" data-board="classic" title="Classic">
                            <span class="preview classic"></span>
                        </button>
                        <button class="board-theme-btn" data-board="wood" title="G·ªó">
                            <span class="preview wood"></span>
                        </button>
                        <button class="board-theme-btn" data-board="blue" title="Xanh">
                            <span class="preview blue"></span>
                        </button>
                        <button class="board-theme-btn" data-board="green" title="Xanh l√°">
                            <span class="preview green"></span>
                        </button>
                    </div>
                </div>

                <div class="setting-group">
                    <label><i data-lucide="layout-grid" class="label-icon"></i> Ki·ªÉu qu√¢n c·ªù:</label>
                    <div class="piece-sets">
                        <button class="piece-set-btn active" data-pieces="unicode">Unicode</button>
                        <button class="piece-set-btn" data-pieces="classic">Classic</button>
                        <button class="piece-set-btn" data-pieces="modern">Modern</button>
                    </div>
                </div>

                <div class="setting-group">
                    <label><i data-lucide="volume-2" class="label-icon"></i> √Çm thanh:</label>
                    <div class="sound-toggle">
                        <button id="btn-sound" class="sound-btn active">
                            <i data-lucide="volume-2"></i> B·∫≠t
                        </button>
                    </div>
                </div>

                <button id="btn-close-settings" class="modal-btn primary">
                    <i data-lucide="check"></i> ƒê√≥ng
                </button>
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal hidden">
        <div class="modal-content">
            <div id="result-icon" class="result-icon">üèÜ</div>
            <h2 id="result-title">Ch√∫c m·ª´ng!</h2>
            <p id="result-message">B·∫°n ƒë√£ th·∫Øng!</p>
            <div class="modal-buttons">
                <button id="btn-play-again" class="modal-btn primary">
                    <i data-lucide="refresh-cw"></i> Ch∆°i l·∫°i
                </button>
                <button id="btn-change-settings" class="modal-btn">
                    <i data-lucide="settings"></i> ƒê·ªïi thi·∫øt l·∫≠p
                </button>
            </div>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.17.0/dist/ort.min.js"></script>
    <script type="module" src="js/app.js"></script>
    <script>
        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>

</html>